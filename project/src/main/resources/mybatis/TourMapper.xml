<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="tour">
	<select id="selectAll_eastasia" resultType="TourBean">
		select * from tour where land='동아시아' order by country
	</select>
	
	<!-- eastasia join guide -->
	<resultMap type="TourBean" id="EastAsiaMap">
		<result property="tour_no" column="tour_no"/>
		<result property="country" column="country"/>
		<result property="city" column="city"/>
		<result property="name" column="name"/>
		<result property="cost" column="cost"/>
		<result property="vehicle" column="vehicle"/>
		<result property="comments" column="comments"/>
		<result property="course" column="course"/>
		<result property="latlng" column="latlng"/>
		<result property="firstimg" column="firstimg"/>
		<result property="secondimg" column="secondimg"/>
		<result property="thirdimg" column="thirdimg"/>
		
		<association property="GuideVo" resultMap="GuideVo"/>
	</resultMap>
	
	<resultMap type="GuideBean" id="GuideVo">
		<result property="guide_name" column="guide_name"/>
		<result property="guide_city" column="guide_city"/>
	</resultMap>
	
	<select id="selectOne_eastasia" parameterType="TourBean" resultMap="EastAsiaMap" >
		select tour.tour_no,tour.name,tour.city,tour.cost,tour.vehicle,tour.comments,tour.course,tour.latlng,tour.firstimg,tour.secondimg,tour.thirdimg,guide.guide_name from tour inner join guide on tour.city=guide.guide_city where tour_no=#{value}
	</select>
	
	<insert id="insertOne_eastasia" parameterType="PaidBean">
		insert into paid (tour_no,client_name,paid_name,paid_phone,paid_birth,paid_count,paid_kakaoid,tour_date,book_date,paid_total) values (#{tour_no},#{client_name},#{paid_name},#{paid_phone},#{paid_birth},#{paid_count},#{paid_kakaoid},#{tour_date},now(),#{paid_total})
	</insert>

</mapper>

